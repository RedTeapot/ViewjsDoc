<!DOCTYPE HTML>
<html>
<head>
	<meta charset = "utf-8" />
	<meta name = "format-detection" content = "telephone = no" />
	<meta name = "msapplication-tap-highlight" content = "no" />
	<meta name = "viewport" content="initial-scale=1, minimum-scale=1" />

	<link rel = "stylesheet" href = "css/demo.css"/>
	<link rel = "stylesheet" href = "iconfont/iconfont.css"/>

	<title>View.js</title>
</head>
<body>
	<div class = "content">
		<header><div class = "container">
			<div class = "logo" onclick = "location.href = 'index.html'"><img src = "asset/logo.svg"/><span>View.js</span></div>
			<a class = "github" href = "https://github.com/RedTeapot/Viewjs" target = "_blank"></a>
		</div></header>
		<div class = "main"><div class = "container">
			<article><div>
				<div class = "contact">没有找到期望的样例？<a href = "mailto:wmjhappy_ok@126.com">联系我吧！</a></div>
			</div></article>
			<aside></aside>
			<div class = "clear-float"></div>
		</div></div>
	</div>

	<script>
	;(function(){
		var sections = [
			{
				id: "shi-tu-rong-qi",
				title: "视图容器",
				samples: [
					{
						title: "多视图共享静态Footer",
						desc: "借助视图容器使多个视图共享一个底部导航"
					},
					{
						title: "多视图共享静态Footer",
						desc: "借助视图容器使多个视图共享一个底部导航"
					}
				]
			},
			{
				id: "mo-ren-shi-tu",
				title: "默认视图",
				samples: [
					{
						title: "默认视图1",
						desc: "默认视图描述1"
					},
					{
						title: "默认视图2",
						desc: "默认视图描述2"
					}
				]
			}
		];

		var find = function(rootObj, selector){
			if(arguments.length === 1){
				selector = arguments[0];
				rootObj = document.body;
			}

			return rootObj.querySelector(selector);
		};

		var asideObj = find("aside"),
			articleObj = find("article > div"),
			contactObj = find(".contact");

		sections.forEach(function(section, i){
			var sectionObj = document.createElement("section");
			sectionObj.id = section.id;
			sectionObj.innerHTML = '<div class = "title"></div>\n' +
				'<div class = "content"></div>';

			find(sectionObj, ".title").innerHTML = section.title;
			var sectionConententObj = find(sectionObj, ".content");
			section.samples.forEach(function(sample){
				var sampleObj = document.createElement("sample");
				sampleObj.className = "sample-wrapper";
				sampleObj.innerHTML = '<div class = "sample">\n' +
					'\t\t<div class = "title"></div>\n' +
					'\t\t<div class = "desc"></div>\n' +
					'\t</div>';

				find(sampleObj, ".title").innerHTML = sample.title;
				find(sampleObj, ".desc").innerHTML = sample.desc;

				sectionConententObj.appendChild(sampleObj);
			});
			articleObj.insertBefore(sectionObj, contactObj);

			var menuItemObj = document.createElement("a");
			menuItemObj.innerHTML = section.title;
			menuItemObj.setAttribute("data-id", section.id);
			menuItemObj.href = "#" + section.id;

			if(i === 0)
				menuItemObj.className = "active";

			asideObj.appendChild(menuItemObj);
		});

		var switchActiveSection = function(sectionId){
			var obj = find(asideObj, "[data-id=" + sectionId + "]");

			var activeObj = find(asideObj, ".active");
			if(activeObj === obj)
				return;

			activeObj.classList.remove("active");
			obj.classList.add("active");
		};

		asideObj.addEventListener("click", function(e){
			if(e.target.tagName !== "A")
				return;
			switchActiveSection(e.target.getAttribute("data-id"));
		});

		articleObj.addEventListener("scroll", function(e){

		});
	})();

	;(function(){
		var layout = function(){
			var height = window.innerHeight;
			document.querySelector(".main").style.height = (height - document.querySelector("header").offsetHeight) + "px";
		};
		layout();
		window.addEventListener("resize", layout);
	})();
	</script>
</body>
</html>